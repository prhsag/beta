name: Check Cycle Status

on:
    workflow_dispatch: 
        inputs:
            proceed:
                description: 'GO/NOGO'
                type: boolean
                required: true
                default: false

jobs:
    # get-proceed-status:
    #     runs-on: ubuntu-latest
    #     outputs:
    #         proceed-status: ${{ steps.check-proceed-status.outputs.PROCEED_STATUS }}
    
    #     steps:
    #       - name: Checkout code
    #         uses: actions/checkout@v3
    
    #       - name: Check Proceed Status
    #         id: check-proceed-status
    #         run: |
    #             if [[ "${{ github.event.inputs.proceed}}" == "true" ]]
    #             then
    #                 echo "Proceed Status: ${{ github.event.inputs.proceed }}"
    #                 echo "PROCEED_STATUS=GO" >> $GITHUB_OUTPUT
    #             else
    #                 echo "Proceed Status: NOGO"
    #                 echo "PROCEED_STATUS=NOGO" >> $GITHUB_OUTPUT
    #             fi

    #       - name: Trigger Await Aproval Workflow (External)
    #         if: ${{ steps.check-proceed-status.outputs.PROCEED_STATUS == 'NOGO'}}
    #         uses: prhsag/beta/.github/actions/AwaitApproval@main
    #         env:
    #             TOKEN_PAT: ${{ secrets.TOKEN_PAT }}

    check-status:
        uses: prhsag/QM/.github/workflows/request-review.yaml@main
        with:
            proceed: ${{ github.event.inputs.proceed }}

    # ask-approval:
    #     needs: get-proceed-status
    #     if: ${{ always() && needs.get-proceed-status.result == 'failure'  }}
    #     uses: prhsag/alpha/.github/workflows/request-review.yaml@main
    #     with:
    #         proceed: ${{ needs.get-proceed-status.outputs.proceed-status }}


    

# At this time the private repository use is only available on GitHub Enterprise Cloud so you would have to upgrade your organisation to that plan.